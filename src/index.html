<!--
index.html
Defines structure and contents of application
Block Keeper
Created by Dallas McNeil
-->

<!DOCTYPE html>
<html>
<head>
    <title>Block Keeper</title>
    <link type="text/css" rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet/less" type="text/css" href="styles/base.less">
    
    <script src="scripts/colorScheme.js"></script>
    <script>
        less = {
            async: true,
            fileAsync: true
        };
    </script>
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="scripts/libs/less.min.js"></script>
    <script src="scripts/libs/jQuery.js"></script>
    <script src="scripts/libs/jQuery UI.js"></script>
    <script src="scripts/libs/RecordRTC.js"></script>
    <script src="scripts/libs/raphael-min.js"></script>
    <script src="scripts/libs/scramble_222.js"></script>
    <script src="scripts/libs/scramble_333.js"></script>
    <script src="scripts/libs/scramble_NNN.js"></script>
    <script src="scripts/libs/scramble_pyram.js"></script>
    <script src="scripts/libs/scramble_minx.js"></script>
    <script src="scripts/libs/scramble_sq1.js"></script>
    <script src="scripts/libs/scramble_clock.js"></script>
    <script src="scripts/libs/scramble_skewb.js"></script>
    <script src="scripts/libs/stackmat.js"></script>
    <script src="scripts/libs/confetti.js"></script>
    <script>if (window.module) module = window.module;</script>
</head>
    
<body>
    <style id="theme"></style>
    <link type="text/css" rel="stylesheet" href="styles/standardWindowBar.css" id="titleBarStyle">
    <div id="windowBar"></div>
    <div id="content">
    <div id="background" onclick="resetUI()">
        <canvas id="confetti"></canvas>
        <div id="centreBackground">
            <p id="timer">0.000</p>
            <p id="announcement">New Best Time!</p>
        </div>
        <div class="indicator" id="leftIndicator"></div>
        <div class="indicator" id="rightIndicator"></div>
    </div>
        
    <p id=scramble></p>
        
    <div id="stats">
        <select title="Event Select" id="puzzleSelect" onchange="setPuzzle()"></select>
        <div id="sessionContainer">
            <select title="Session Select" id="sessionSelect" onchange="setSession()"></select>
            <button title="Edit Session" id="sessionButton" onclick="toggleSessionButtons()"></button>
        </div>
        <div id="sessionButtons">
            <button title="Create a new session" id="newSessionButton" onclick="createSessionButton()">New</button>
            <button title="Delete this session" id="deleteSessionButton" onclick="deleteSessionButton()">Delete</button>
        </div>
        <table id="sessionDetails">
            <tr>
                <td>
                    <p id="sessionSolves"><b>Solves:</b> 0/0</p>
                </td>
                <td>
                    <p id="sessionMean"><b>Mean:</b> 0.00</p>
                </td>
            </tr>
            <tr>
                <td>
                    <p id="sessionSD"><b>Ïƒ (s.d):</b> 0.00</p>
                </td>
                <td>
                    <p id="sessionMedian"><b>Median:</b> 0.00</p>
                </td>
            </tr>
        </table>
        <table id="sessionStats">
            <tr>
                <td>

                </td>
                <td>
                    <p>Current</p>
                </td>
                <td>
                    <p>Best</p>
                </td>
            </tr>
            <tr>
                <td>
                    <p>Time</p>
                </td>
                <td>
                    <p>-</p>
                </td>
                <td>
                    <p>-</p>
                </td>
            </tr>
        </table>
        <div id="sessionRecordsContainer"> 
        <table id="sessionRecords">
            <tr>
                <td>
                    <button title="Add Time" id="addTimeButton" onclick="showTimeDialog()">+</button>
                </td>
                <td>
                    <p>Time</p>
                </td>
                <td>
                    <p>Ao5</p>
                </td>
                <td>
                    <p>Ao12</p>
                </td>
            </tr>
        </table>
        </div>
    </div>

    <button title="Video Preview" id="previewButton" onclick="showPreview()"></button>
    <button title="Preferences" id="preferencesButton" onclick="openPreferences()"></button>
    <select title="Tool Select" id="toolSelect" onchange="updateTool()">
        <option value="scramble">Drawn Scramble</option>
        <option value="sessionTrend">Session Trend</option>
        <option value="distribution">Distribution</option>
        <option value="eventTrend">Event Trend</option>
        <option value="eventStats">Event Statistics</option>
    </select>

    <div id="tools">
    </div>
    <button title="Add Tool" id="addToolButton" onclick="addTool()"></button>
    
        
    <div id="dialogAddTime">
        <p>Add Time (in seconds)
            <input type="text" id="addTimeInput"></p>
        <p><button onclick="addTime()">Add</button> <button onclick="closeTimeDialog()">Cancel</button></p>
    </div>
    
    <div id="dialogRecord">
        <button title="Set result to OK" onclick="recordResultOK()">OK</button>
        <button title="Set result to +2 penalty" onclick="recordResult2()">+2</button>
        <button title="Set result to DNF penalty" onclick="recordResultDNF()">DNF</button>
        <button title="Delete this time" style="margin-right:0px;" onclick="deleteRecord()">Delete</button>
        <p id="recordScramble"></p>
    </div>
    
    <div id="dialogPreview">
        <button id="closePreview" class="cross" onclick="closePreview()"></button><br>
        <video id="previewVideo" controls></video>
        <button title="Save video as file" id="savePreview" onclick="savePreview()">Save Video</button>
    </div>
        
    <div id="dialogShowInfo">
        <button id="closeShowInfo" class="cross" onclick="closeShowInfo()"></button><br>
        <p id="messageShowInfo">Hello World!</p>
    </div>
        
    <div id="dialogCSTimer">
        <p id="messageCSTimer"></p><br>
        <button title="Import into selected session" id="importCSTimer" onclick="importCSTime(true)">Import</button>
    </div>
        
    <div id="dialogPreferences">
        <button id="closePreferences" class="cross" onclick="closePreferences()"></button>
        <div id="tabs">
            <ul>
            <li class="tab"><a href="#tabs-1"><button>Timer</button></a></li>
            <li class="tab"><a href="#tabs-2"><button>Interface</button></a></li>
            <li class="tab"><a href="#tabs-3"><button>Import/Export</button></a></li>
            </ul>
            <div id="tabs-1">
                <form name="preferencesTimer">
                    <p title="'8 Seconds' and '12 Seconds' announcements during inspection">Inspection Announcements: <select name="voice">
                        <option value="none" selected>None</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select></p>
                    <p title="Decimal places after times">Time Detail:  <select name="timerDetail" style="width:52px">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2" selected>2</option>
                        <option value="3">3</option>
                    </select></p>
                    <p title="Time between timer keys being pressed and timer starting">Timer Start Delay:  <select name="timerDelay" style="width:100px">
                        <option value="0">None</option>
                        <option value="0.3">0.3</option>
                        <option value="0.55" selected>0.55</option>
                        <option value="1">1</option>
                    </select></p>
                    <p title="Time replaced with 'Solve' while solving"><input type="checkbox" name="hideTiming" class="checkbox">Hide Timer While Solving</p>
                    <p title="Time displayed as minutes and seconds"><input type="checkbox" name="formatTime" class="checkbox">Format Times (mm:ss)</p>
                    <p title="15s of inspection before solving"><input type="checkbox" name="inspection" class="checkbox">WCA Inspection</p>
                    <p title="Use primary mouse button to use timer, like spacebar, with cursor over background"><input type="checkbox" name="useMouse" class="checkbox">Use Mouse For Timer</p>
                    
                    <p title="Use 2 keys instead of spacebar"><input type="checkbox" name="splitMode" class="checkbox">Split Timer Controls (<input name="leftKey" maxlength="1" type=text style="width:15px;text-align: center;"> and <input maxlength="1" name="rightKey" type=text style="width:15px;text-align: center;"> Keys)</p>
                    <p title="Use split keys to stop timer"><input type="checkbox" name="endSplit" class="checkbox">Stop Timer With Split Keys</p>
                    <p title="Use split keys for OH and require one split key to be held down during solves or cause a DNF penalty"><input type="checkbox" name="OHSplit" class="checkbox">OH Split Keys</p>
                    <p title="Use external Stackmat timer to control timer"><input type="checkbox" name="stackmat" class="checkbox">Use Stackmat Timer</p>
                    <p title="Use camera to record solves"><input type="checkbox" name="recordSolve" class="checkbox">Video Record Solves</p>
                    <p title="Automatically save recorded video to folder">Video Autosave Location:  <input name="autosaveLocation" type="text" style="width:150px"/>  <button onclick="selectLocation(); return false;">Select</button></p>
                </form>
            </div>
            <div id="tabs-2">
                <form name="preferencesInterface">
                    <p title="Announce that best time for event has been beaten and show confetti"><input type="checkbox" name="showBestTime" class="checkbox">Announce Best Time</p>
                    <p title="Font size of displayed scramble">Scramble Font Size:   <select name="scrambleSize" style="width:70px">
                        <option value="2">2</option>
                        <option value="2.5">2.5</option>
                        <option value="3">3</option>
                        <option value="3.5">3.5</option>
                        <option value="4" selected>4</option>
                        <option value="5">5</option>
                        <option value="6">6</option> 
                        <option value="8">8</option>
                        <option value="10">10</option>
                        <option value="12">12</option>
                    </select></p>
                    <p title="Alignment of scramble text, left, right or centered">Scramble Text Alignment:   <select name="scrambleAlign" style="width:120px">
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right" selected>Right</option>
                    </select></p>
                    <p title="Theme colors of Block Keeper">Theme:  <select name="theme" onchange="previewStylesheet()" style="width:200px;">
                        <option value=0>Dark</option>
                        <option value=1>Light</option>
                        <option value=2>Black</option>
                        <option value=3>Deep Blue</option>
                        <option value=4>Deep Green</option>
                        <option value=5>Deep Red</option>
                        <option value=6>Light Magenta</option>
                        <option value=7>Light Yellow</option>
                        <option value=8>Light Cyan</option>
                        <option value=9>Neon Green</option>
                        <option value=10>Neon Pink</option>
                        <option value=11>Neon Yellow</option>
                        <option value=12>Neon Blue</option>
                        <option value="custom">Custom...</option>
                    </select></p>
                    <p title="Image displayed in background. Select 'Custom...' to use custom theme colors">Background Image:   <input name="backgroundImage" type="text" style="width:150px">  <button onclick="selectImage(); return false;">Select</button></p>
                    <p title="Colors used in the custom theme">Custom Theme Colors   <button title="Refresh custom theme" onclick="previewStylesheet();return false;">Refresh Theme</button></p>
                    <p>Background:   <input name="theme0" type=text style="width:100px">     Timer Text: <input name="theme1" type=text style="width:100px"></p>
                    <p>Scramble Text:   <input name="theme2" type=text style="width:100px">     Base: <input name="theme3" type=text style="width:100px"></p>
                    <p>Border:   <input name="theme4" type=text style="width:100px">     Text: <input name="theme5" type=text style="width:100px"></p>  
                </form>
            </div>
            <div id="tabs-3">
                <p title="Import and export Block Keeper sessions">Block Keeper:  <button onclick="importBK()">Import</button>  <button onclick="exportBK()">Export</button></p>
                <p title="Import csTimer Sessions">csTimer:  <button onclick="importCS()">Import</button></p>
                <p title="Export all times as flat CSV file">CSV:  <button onclick="exportCSV()">Export</button></p>
                <p title="Export the currently selected session as as readable text with session statistics and times">Current Session as Pretty Text:  <button onclick="exportPretty()">Export</button>  <button onclick="clipboardPretty()">Copy</button></p>
            </div>
        </div>
        
        <p>Created by Dallas McNeil, <span id="versionLabel">Version 0.0.0</span></p>
        <button title="Save preferences and close" id="savePreferences" onclick="savePreferencesForm()">Save</button>
    </div>
        
    </div>
    
    <div id="versionBannerContainer">
        <div id="versionBanner" onclick="downloadLatestVersion()">
            <p id="versionMessage">A newer version of Block Keeper is available! Click here to download</p>
        </div>
        <button id="closeVersion" onclick="closeVersion()" class="cross"></button>
    </div>
    
    <script src="scripts/scrambles.js"></script> 
    <script src="scripts/style.js"></script>
    <script src="scripts/preferences.js"></script>
    <script src="scripts/sessions.js"></script> 
    <script src="scripts/timer.js"></script>
    <script src="scripts/windowBar.js"></script>
    <script src="scripts/tools.js"></script>
    <script src="scripts/update.js"></script> 
    <script src="scripts/shortcuts.js"></script>
    <script src="scripts/record.js"></script>
</body>
</html>
